# <h1> Telegram Backup

[**Go to English version**](https://github.com/NotStatilko/tgback/blob/master/READMEen.md) (outdated now)


**tgback** — программа для создания бэкапов ваших [**Telegram**](https://telegram.org) аккаунтов.

Telegram запрещает вход в аккаунт без подтверждения по номеру телефона. Если Вы потеряете к нему доступ – **потеряете и аккаунт**.

TelegramBackup (**tgback**) создаёт **бесконечную** сессию Вашего приложения так, как если бы Вы входили в аккаунт с другого устройства.


Программа "из коробки" поддерживает изменение номера телефона аккаунта через бэкап. После изменения оного через tgback Вы сможете без проблем зайти в свой аккаунт.


Файл бэкапа (`.etgback`) шифруется Вашим паролем с помощью [**AES-256 CBC**](https://github.com/ricmoo/pyaes). Пароль предварительно пропускается через более чем 2 миллиона операций хеширования для защиты от брутфорса.
Весь бэкап весит всего ~1 килобайт, поэтому Вы без проблем сможете его поместить даже **в QR код** и распечатать позднее.

**Ваш `.etgback` файл остаётся только у Вас и никуда не передаётся**

# <h2> Установка

На данный момент требуется предварительное тестирование **tgback3.0**, более детально причины описаны [здесь](https://github.com/NotStatilko/tgback/issues/2). Вы можете подождать официального релиза и/или склонировать репозиторий себе на устройство и запустить `TelegramBackup.py`.

```
git clone https://github.com/NotStatilko/tgback
cd tgback
pip install -r requirements.txt
python TelegramBackup.py
```
Я **не рекомендую** использование **tgback2.0** из-за более слабого алгоритма шифрования и многих ошибок.


# <h2> Хорошо, как создать бэкап?
  
Для начала вам необходимо создать своё приложение.

1) Зайдите на **https://my.telegram.org** и введите там свой номер. После, введите код, который Вам пришлёт Telegram.
2) Выберите **API Development Tools**, вы попадёте в меню Вашего приложения. Оттуда Вам необходимо взять два параметра: `API ID`, `API Hash`.
Пожалуйста, обратите внимание на то, что эти параметры Вы должны **держать в секрете**. После создания бэкапа возможно их удаление, так как `.etgback` файл автоматически всё сохранит и зашифрует.

3) Запустите `TelegramBackup.py` файл и выберите **1 режим**
4) Введите/вставьте Ваш **API ID**, **API Hash** и следуйте дальшнейшим инструкциям.

После всех операций будет получен Ваш бэкап зашифрованный Вашим паролем. Не забывайте, что пароль должен быть сложным, так как при раскрытии бэкапа злоумышленник получит **полный** доступ над аккаунтом.

Если Вы каким-либо образом раскрыли пароль к вашему бэкапу – немедленно зайдите в раздел Активные сеансы/Девайсы и отключите сессию приложения. После этого бэкап приходит в негодность, а Вы сможете без проблем создать новый.
Также, обратите внимание на то, что сессия бэкапа **не должна быть активной с момента его создания/обновления**. Если Вы заметили что-то подозрительное – немедленно отключайте эту сессию.


# <h2> Обновление бэкапа

Ранее Вы могли прочитать об "обновлении бэкапа", хотя раньше такого не требовалось. Это действительно так. Сессии отключаются через неизвестное время бездействия, поэтому их нужно поддерживать. На данный момент необходимо обновлять её каждые два месяца, но можно и чаще. 
Для обновления бэкапа достаточно просто его открыть во втором режиме используя **tgback3.0** и выбрать `Refresh .etgback backup`. 

**TelegramBackup** автоматически рассчитывает время до истечения валидности `.etgback`, отправляет Вам в _Избранное_ точные даты, и создаёт отложенное сообщение за неделю до.


# <h2> Файлы конфигурации

В последней версии была добавлена поддержка т.н `tgback-config` файлов. Если ваш терминал не поддерживает вставку, или вы хотите выполнить быстрый бэкап – можете воспользоваться этим нововведением.
Для создания такого файла необходимо в пустой файл с любым расширением записать всё необходимое для **tgback3.0** в таком формате (шаблон):
```
api_id; api_hash; phone_number; telegram_password; backup_password; backup_filename
```
Далее его нужно просто экспортировать в режиме бэкапа аккаунтов в **tgback3.0**

Пример:
```
159160; fad31739855c367badb4d94b08a3c374; +380000000000; my_tg_password; my_backup_password; my_backup
```
